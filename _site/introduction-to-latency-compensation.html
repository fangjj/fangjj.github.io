<!DOCTYPE html>
<html lang='en'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Introduction to Latency Compensation | MeteorHacks</title>
  <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link href="/blog/rss.xml" rel="alternate" type="application/rss+xml" title="MeteorHacks - Meteor hacks and tricks by arunoda" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script type="text/javascript" src='/js/jquery.min.js'></script>
<script type="text/javascript" src='/js/bootstrap.min.js'></script>
<script type="text/javascript" src="//use.typekit.net/nok3jzz.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript" src="https://gumroad.com/js/gumroad.js">
</script>

<!-- Highlight JS -->
<link rel="stylesheet" href="/vendor/highlight/styles/zenburn.css">
<script type="text/javascript" src='/vendor/highlight/highlight.pack.js'></script>
<script>hljs.initHighlightingOnLoad();</script>

</head>
<body>

<!-- Email Handling -->








  <!-- Header Area -->
  <header class="navbar navbar-default" role="banner">
  <div class='container'>
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".mh-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" id='mh-navbar-brand-title' href="/">MeteorHacks</a>
      
    </div>
    <nav class='collapse navbar-collapse mh-navbar-collapse clearfix' role='navigation'>
      <ul class="nav navbar-nav pull-right">
        <li><a href="https://bulletproofmeteor.com/?utm_source=meteorhacks&utm_medium=link&utm_term=meteorhacks&utm_content=homepage&utm_campaign=meteorhacks">BulletProof Meteor</a></li>
        
            <li><a href="/pro-meteor">Pro Meteor</a></li>
        
            <li><a href="/fast-render">Fast Render</a></li>
        
            <li><a href="/meteor-weekly">Meteor Weekly</a></li>
        
      </ul>
    </nav>
  </div>
</header>


  <div class='container' style='max-width:1000px'>
    <div id='top-banner'>
  <a href="https://kadira.io/?utm_source=meteorhacks&utm_medium=banner&utm_term=kadira&utm_content=toplink&utm_campaign=kadira">
    Kadira
  </a>
  <a href="https://kadira.io/?utm_source=meteorhacks&utm_medium=banner&utm_term=kadira&utm_content=toplink&utm_campaign=kadira">
     - Performance Monitoring for Meteor
  </a>
  <a href="https://kadira.io/?utm_source=meteorhacks&utm_medium=banner&utm_term=kadira&utm_content=toplink&utm_campaign=kadira">
   (you should try this)
  </a>
</div>

    <div class='row'>
      <div class='col-xs-8 hidden-xs' id='blog-page'>
        <h1>Introduction to Latency Compensation</h1>
        <div id='blog-content' class='blog-seperator'>
          <p>If you’ve browsed <a href="http://www.meteor.com">meteor.com</a> carefully or watched some Meteor videos, you will definitely have heard the term “latency compensation”. Some people think this is just a buzzword and frankly I have not heard this term used anywhere else. But actually, it is very useful and adds a pleasant user experience to your app. Let me help you to understand it and show you how to use it correctly.</p>

<h2 id="latency-compensation-101">Latency compensation 101</h2>

<p>In a traditional application, when a user does some action on an app, they have to wait until the request is processed on the server before the changes are reflected by the UI. But with latency compensation, users no longer need to wait. The result of an action is reflected by the browser immediately. This is a built-in feature of Meteor and you can use it very easily. Let me explain more about it with an example.</p>

<p>We’ll be using a simple blog app as an example. Here’s the JavaScript code for our app:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// File: /lib/collections.js</span>

<span class="nx">Posts</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Meteor</span><span class="p">.</span><span class="nx">Collection</span><span class="p">(</span><span class="s1">'posts'</span><span class="p">);</span>

<span class="nx">Meteor</span><span class="p">.</span><span class="nx">methods</span><span class="p">({</span>
  <span class="na">addPost</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">post</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// add a delay to mimic the network time</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Meteor</span><span class="p">.</span><span class="nx">isServer</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Meteor</span><span class="p">.</span><span class="nx">_sleepForMs</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">postId</span> <span class="o">=</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">post</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">postId</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// File: /client/app.js</span>

<span class="nx">Template</span><span class="p">.</span><span class="nx">addPost</span><span class="p">.</span><span class="nx">events</span><span class="p">({</span>
  <span class="s2">"click button"</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#title'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#content'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">title</span><span class="p">:</span> <span class="nx">title</span><span class="p">,</span>
      <span class="na">content</span><span class="p">:</span> <span class="nx">content</span>
    <span class="p">};</span>

    <span class="nx">Meteor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">'addPost'</span><span class="p">,</span> <span class="nx">post</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">postId</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">reason</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Router</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'/post/'</span> <span class="o">+</span> <span class="nx">postId</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

</code></pre></div></div>

<p>You can read the full source code from <a href="https://github.com/meteorhacks-samples/simple-blog">here</a>.</p>

<h3 id="without-latency-compensation">Without latency compensation</h3>

<p><img src="https://i.cloudup.com/cGFO63m3qk.png" alt="Without latency compensation" /></p>

<p>When a user adds a new post, a request will be initiated to the server. The server will process the request and send back the document changes. After that it will send the method response and it will fire the callback. Only then will the user be redirected to the actual post added.</p>

<p>There is a wait time between the request initiation and delivery of the result. The user has no clue whether the action has been successfully initiated or not. We can add a loading indicator to get rid of this uncertainty, but there is a better way.</p>

<h3 id="with-latency-compensation">With latency compensation</h3>

<p><img src="https://i.cloudup.com/LgntBPnyDI.png" alt="With latency compensation" /></p>

<p>When the user adds a new post, a request will be sent immediately to the server as usual. But now, the result of the request will be instantly reflected on the client. Meteor detects the document changes on the client side and reflects the changes on the UI.</p>

<p>The server will process the request and send back the changes as usual. But this time, Meteor will diff and merge the server changes with the changes it has detected from the client. Most of the time, both of these are the same unless the server adds some additional fields to the post before inserting it.</p>

<p>So, now all the user actions are reflected immediately and there is no need to wait for the server result. Isn’t that nice?</p>

<blockquote>
  <p>Latency compensation is not supported in our example app yet!</p>
</blockquote>

<h3 id="wait-what-if-the-server-rejects-the-request">Wait, what if the server rejects the request?</h3>

<p>It is possible for the server to reject the request or throw some error. In this scenario, the Meteor client will detect it and revert the changes. This might surprise the user, but there are ways to deal with situations like this. I will explain these later.</p>

<h2 id="implementing-latency-compensation">Implementing latency compensation</h2>

<p>Implementing latency compensation in your app is pretty easy. Meteor has done most of the hard work for you. Let’s begin.</p>

<ul>
  <li>Latency compensation works only if you are doing write operations to a data store supported by Meteor (currently only MongoDB and Redis).</li>
  <li>If you are relying on content from a third-party service like Twitter, there is no way to implement latency compensation directly.</li>
  <li>There are only two places where you can do a write operation to a data store: inside a method call or directly via a local collection.</li>
</ul>

<p>If you are using a local collection, you don’t have to do anything. But if you are using a method, you need to implement your method on both the server and the client.</p>

<p>On the client side, Meteor will evaluate your method and pick out only the data store changes. It will reject the method result or any errors that have occurred. Your method on the client is known as the method stub and the evaluation of it is known as the method simulation.</p>

<p>You might have noticed that our example app has defined its <code class="highlighter-rouge">addPost</code> method inside the <code class="highlighter-rouge">lib</code> directory. In this way, it should be available on both the server and the client. So, our example has latency compensation support.</p>

<p>But wait… I mentioned earlier that our app doesn’t have latency compensation support. Why?</p>

<p>That’s because, we are explicitly waiting for the server result and only then do we route the user to the post. Even though latency compensation works, we simply ignored it by waiting for the server response.</p>

<p>Let’s try to fix our app and add latency compensation support.</p>

<h3 id="the-fix">The fix</h3>

<p>We can simply fix our app by adding <code class="highlighter-rouge">_id</code> to the post inside the client. By doing this, we no longer rely on the server result to get the postId. Now we can route the user to the newly added post just after the method call has been invoked.</p>

<p>Still, it’s possible for the server to reject the request or throw an error. So, we need to add a callback and watch for an error. If there is an error, Meteor will revert the changes made in the client. You will also get notified about the error via the callback. Then, you can simply display an error message to the user.</p>

<p>This is the code, after I made the fix:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// File: /client/app.js
Template.addPost.events({
  "click button": function() {
    var title = $('#title').val();
    var content = $('#content').val();

    var post = {
      title: title,
      content: content,
      _id: Random.id()
    };

    Meteor.call('addPost', post, function(err) {
      if(err) {
        alert(err.reason);
      }
    });

    Router.go('/post/' + post._id);
  }
});
</code></pre></div></div>

<p>This is the diff view of the fix:</p>

<p><img src="https://i.cloudup.com/iRnmkAJJqP.png" alt="Fix for the latency compensation" /></p>

<p>You can have a look at the complete fixed app from <a href="https://github.com/meteorhacks-samples/simple-blog/tree/latency-compensation">here</a>.</p>

<h2 id="when-to-use-latency-compensation">When to use latency compensation</h2>

<p>This completely depends on your app and what you need to achieve. If there is a mission critical task, you may need the users to wait for the server response.</p>

<p>In Kadira, when a user adds an <a href="https://kadira.io/blog/stay-alert-with-your-meteor-app/">alert</a>, they need to wait until it gets processed on the server. So there is no latency compensation. That’s a design decision we’ve chosen for Kadira alerts since we think it’s important for the user to know the result before continuing.</p>

<p>But for an app like Telescope, latency compensation is a must and it will increase user engagement.</p>

<p>So, this is a subjective question and it’s up to you to decide whether to support latency compensation or not.</p>

<h2 id="common-issues">Common Issues</h2>

<h3 id="i-forgot-to-add-the-client-side-method-stub">I forgot to add the client-side method stub</h3>

<p>Check your code and implement the method on both the client and the server. You can easily do this by implementing your method somewhere where it is accessible from both the client and the server. You can use the <code class="highlighter-rouge">Meteor.isSimulation</code> flag to determine whether your code runs inside a simulation or not. That may help you to tweak your method to behave differently on different environments.</p>

<h3 id="i-have-some-secret-logic-in-my-method-and-i-dont-want-the-client-to-see-it">I have some secret logic in my method and I don’t want the client to see it</h3>

<p>Yes, that’s a valid question. But we only need to implement data store changes. So, you can create a method on the server with all the secret logic. Just implement data store changes in a separate method with the same name inside your client code.</p>

<h3 id="i-need-to-rely-on-the-server-response">I need to rely on the server response</h3>

<p>If you wait for the server result (using callback), you won’t get the benefit of the latency compensation. So, design your application to not rely on the server response. Actually, this is always possible, and I don’t believe it’s impossible.</p>

<h3 id="im-using-a-third-party-service">I’m using a third-party service</h3>

<p>Let’s say you are building a Twitter client and the user just created a new tweet. Now, you may invoke an API call to Twitter. But still, it’s a good idea to store all the tweets that have been created from your app in a collection. Then you can implement latency compensation.</p>

<hr />

<p>I think you now have a better understanding of latency compensation and know how to use it correctly. Try it out with your application and share your experience.</p>

<blockquote>
  <p>Thanks <a href="https://twitter.com/imslavko">Slava Kim</a> for reviewing the article</p>
</blockquote>

<hr />

<p>If you’d like to learn exactly how <strong>latency compensation</strong> works inside Meteor, buy my book <a href="https://gumroad.com/l/meteor-explained">Meteor Explained</a>. I discuss latency compensation in <strong>Chapter 4</strong>, where I talk about Methods.</p>

<p><a href="https://gum.co/meteor-explained"><img src="https://i.cloudup.com/XebhBZYIMN.png" alt="Meteor Explained Book Cover" /></a></p>

<blockquote>
  <p><strong>All main chapters</strong> are available right now.</p>

  <p>This book comes with a <strong>100% money-back guarantee</strong> and I’ll refund without asking any questions.</p>
</blockquote>

<p><a href="https://gum.co/meteor-explained">You can purchase <strong>Meteor Explained</strong> for $29</a>.</p>

<p>###Table of Contents</p>

<h4 id="1-basics-available-now">1. Basics (Available Now)</h4>

<ul>
  <li>1.1 Client–Server Architecture</li>
  <li>1.2 DDP</li>
  <li>1.3 Fibers</li>
  <li>1.4 Introduction to Meteor’s Reactivity</li>
</ul>

<h4 id="2-client-side-reactivity-available-now">2. Client-Side Reactivity (Available Now)</h4>

<ul>
  <li>2.1 Local Collections</li>
  <li>2.2 How Deps works</li>
  <li>2.3 How Blaze Works</li>
  <li>2.4 Blaze and Reactivity</li>
</ul>

<h4 id="3-ddp-implementation-available-now">3. DDP Implementation (Available Now)</h4>

<ul>
  <li>3.1 Default DDP Connection</li>
  <li>3.2 Processing Incoming DDP (Client Side)</li>
  <li>3.3 Processing Incoming DDP (Server Side)</li>
</ul>

<h4 id="4-methods-available-now">4. Methods (Available Now)</h4>

<ul>
  <li>4.1 Introduction to Latency Compensation</li>
  <li>4.2 How Latency Compensation Works</li>
  <li>4.3 WriteFence and It’s Usage</li>
</ul>

<h4 id="5-publishsubscribe-available-now">5. Publish/Subscribe (Available Now)</h4>

<ul>
  <li>5.1 How Publish/Subscribe Works</li>
  <li>5.2 Cursors and Observers</li>
  <li>5.3 Merge Box</li>
  <li>5.4 Deps and Subscriptions</li>
</ul>

<h4 id="6-mongodb-and-meteor-available-now">6. MongoDB and Meteor (Available Now)</h4>

<ul>
  <li>6.1 Intro to the mongo Package</li>
  <li>6.2 Polling Observe Driver</li>
  <li>6.3 Oplog Observe Driver</li>
  <li>6.3 MongoDB Write Operations</li>
</ul>

<p><a href="https://gum.co/meteor-explained" class="gumroad-button">Purchase Now</a></p>


        </div>

        <div class='subscribe-form'>
          <div class='title'>Read MeteorHacks from Your Inbox</div>
          <form action="https://madmimi.com/signups/subscribe/85188" method="post" target="_blank">
            <input type='text' name='signup[email]' class='subscribe-form-email' placeholder='Enter your email' />
            <input type='submit' class='subscribe-form-submit' value='Subscribe Now' />
          </form>
        </div>

        
        <div id='blog-page-comments'>
        <!-- DISQUS COMMENT CODE -->
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                  var disqus_shortname = 'meteorhacks'; // required: replace example with your forum shortname

                  /* * * DON'T EDIT BELOW THIS LINE * * */
                  (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                  })();
              </script>
              <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

        <!-- DISQUS COMMENT CODE -->
        </div>
        
      </div>
      <div class='col-xs-4 hidden-xs' id='blog-sidebar'>
        <div id='blog-sidebar-date'>
          July 31, 2014
        </div>
        <div id='blog-sidebar-links'>
          <button class='btn btn-default twitter' onclick='location.href="http://twitter.com/meteorhacks"'>follow @meteorhacks</button> <br>
          <button class='btn btn-default subscribe' onclick='location.href="http://mad.ly/signups/85188/join"'>Subscribe to MeteorHacks</button>
        </div>

        <div id='blog-sidebar-share-links'>
          <div class="pull-left" style="width: 90px;">
            <!-- TWITTER START HERE -->
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="meteorhacks">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
            <!-- TWITTER END HERE -->
          </div>
          <div class="pull-left">
            <!-- START FB -->
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=465096423559129";
              fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));</script>
            <div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true" data-font="arial"></div>
            <!-- END FB -->
          </div>
          <div style="clear:both"></div>
        </div>

        <div>
  <a href="https://bulletproofmeteor.com/?utm_source=meteorhacks&utm_medium=link&utm_term=meteorhacks&utm_content=sidebar&utm_campaign=meteorhacks">
    <img src="/images/bullet-proof-banner.png" class='side-bar-add'>
  </a>
</div>


        <div id='blog-sidebar-items'>
          <h3>Recent Hacks</h3>
          <ul>
            
              
                <li class='post'>
                  
                    <a href='https://kadira.io/blog/graphql/initial-impression-on-react-and-graphql'>Initial Impressions on GraphQL & Relay</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/improving-blaze-performance-part-1'>Improving The Performance of Blaze - Better Way To Destroy Views</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-ui-pattern-keeping-app-state-in-the-url'>Meteor UI Pattern: Keeping App State on the URL</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteorhacks-show-may-2015-docker-and-meteor'>MeteorHacks Show - Docker & Meteor feat. Justin from MDG</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-for-windows-getting-started-guide'>Meteor for Windows: Getting Started Guide</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/learn-kubernetes-the-future-of-the-cloud'>Kubernetes: The Future of Cloud Hosting</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/introducing-sikka-a-firewall-for-meteor-apps'>Introducing Sikka: A Firewall for Meteor Apps</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/flow-router-and-subscription-management'>Flow Router and Subscription Management</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/docker-container-war-and-meteor'>Docker, The Container War and Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/introducing-multi-core-support-for-meteor'>Introducing Multi-Core Support for Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/postponing-nodejs-internals-lessons-on-bulletproof-meteor'>Postponing NodeJS Internals Lessons on BulletProof Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/cluster-performance-test-its-impressive'>Meteor Cluster Performance Test: Impressive Results</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/cluster-a-different-kind-of-load-balancer-for-meteor'>Meteor Cluster - A Different Kind of Load Balancer for Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteorhacks-show-feb'>MeteorHacks Show Feb 2015 - Scaling Meteor and Microservices</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/bulletproof-meteor-leaderboard-and-prizes'>BulletProof Meteor Leaderboard & Prizes</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/implementing-an-instant-search-solution-with-meteor'>Implementing an Instant Search Solution with Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteorhacks-show-recording-and-follow-up-blog-post'>MeteorHacks Show 2 – Recording and Follow-up Blog Posts</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-server-sider-rendering-for-seo-purpose'>Meteor Server-Side Rendering for SEO Purposes</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteorhacks-show-server-side-rendering-kadira-insight'>MeteorHacks Show 2 - Server Side Rendering & Kadira Insight</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-seo-google-fetch-and-render'>Meteor SEO - Google Fetch & Render</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-day-and-meteorhacks'>Meteor Day and MeteorHacks</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/profiling-a-meteor-app-telescope'>Profiling a Meteor app: Telescope</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/server-side-rendering'>Server Side Rendering for Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='https://kadira.io/academy/managing-waittime/'>Managing Wait Time on Meteor methods and subscriptions</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='https://kadira.io/blog/awesome-error-tracking-solution-for-meteor-apps-with-kadira/'>Awesome Error Tracking Solution for Meteor Apps</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/understanding-mergebox'>Understanding MergeBox</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-packaging-system-understanding-versioning'>The Meteor Packaging System – Understanding Versioning</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/how-blaze-works'>How Blaze Works - Meteor's Reactive Templating UI</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/introduction-to-latency-compensation'>Introduction to Latency Compensation</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/client-side-debugging-for-meteor-apps'>Client-Side Debugging For Meteor Apps</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/journey-into-meteors-reactivity'>Journey into Meteor's Reactivity</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='https://kadira.io/academy/optimize-your-app-for-oplog/'>Optimize Your Meteor App for Oplog Integration</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/subscriptions-manager-is-here'>Subscriptions Manager is Here!</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/june-a-big-month-for-us'>June -- a big month for us</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/we-launched-kadira'>We launched Kadira: Performance Monitoring for Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/june-2nd-we-are-launching-meteor-apm'>June 2nd – We are launching Meteor APM</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/improving-meteors-mongodb-read-performance-and-cpu-usage-with-find-faster'>Improving Meteor’s MongoDB Read Performance and CPU Usage with Find-Faster</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/instant-login-for-meteor-with-fast-render'>Instant Login For Meteor With Fast Render</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/xss-and-meteor'>Cross Site Scripting(XSS) and Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/understanding-meteor-wait-time-and-this-unblock'>Understanding Meteor Wait Time & this.unblock</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-js-web-framework-for-everyone'>Meteor.js - A web framework for everyone</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/how-to-use-the-new-meteor-retry-package'>How to Use The New Meteor Retry Package</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/recent-changes-on-the-meteor-roadmap'>Recent Changes on The Meteor Roadmap</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/subscription-manager-for-iron-router'>Subscription Manager for Iron Router</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-in-production-a-case-study'>Meteor in Production - A Case Study</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/building-static-websites-with-meteor'>Building Static Websites with Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/whats-happended-at-the-first-meteorhacks-show'>What's happened at the First MeteorHacks Show</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-subscription-optimizations'>Meteor Subscription Optimization</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/integrating-iron-router-based-apps-with-fast-render'>Integrating Iron Router Based Apps with Fast Render</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/how-to-test-fast-render-working-or-not'>How to Test whether Fast Render is Working or Not</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/fast-render-internals-and-how-it-works'>Fast Render Internals and How It Works</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/announcing-the-meteorhacks-show'>Announcing The MeteorHacks Show</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/fast-render'>Meteor Fast Render [docs]</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/introducing-fast-render'>Introducing Fast Render</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteorhacks-is-ready-for-2014-with-a-big-announcement'>MeteorHacks is Ready for 2014 with a Big Announcement</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/improved-async-utilities-in-meteor-npm'>Improved Async Utilities in Meteor-NPM</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/pro-meteor'>Introducing Pro Meteor Guide</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/the-meteor-marketplace'>The Meteor Marketplace</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='http://meteorhacks.com/meteor-weekly-meteor-ui-nodejs-security-fix-packaged-apps.html'>[Meteor Weekly] Meteor UI, NodeJS Security Fix, Packaged Apps and More</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/retiring-smart-collections'>Retiring SmartCollections</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/debugging-meteor-packages-and-apps'>Debugging Meteor Packages and Apps</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/introducing-portable-meteor-user'>Introducing Portable Meteor User</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/ever-improving-smart-collections'>Ever Improving Smart Collections</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/discover-meteor-ddp-in-realtime'>Discover Meteor DDP in Realtime</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/npm-meteor-integration-is-back'>NPM Meteor Integration is Back for Meteor 0.6.5</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/how-meteor-uses-node'>How Meteor Uses NodeJS</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/lets-scale-meteor'>Let's Scale Meteor - Using MongoDB Oplog</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/making-meteor-500-faster-with-smart-collections'>Making Meteor 500% Faster with Smart Collections</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/introducing-smart-collections'>Introducing Smart Collections for Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/continuos-integration-for-meteor-apps'>Continuous Integration for Meteor Apps</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/realtime-blackboard.html'>[Free eBook] Let's Create a Realtime Blackboard</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/introducing-meteor-streams'>Introducing Meteor Streams</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/logging-support-for-meteor'>Logging Support for Meteor with Winston</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/mongodb-replica-sets-with-meteor'>MongoDB Replica Sets with Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/complete-npm-integration-for-meteor'>Complete NPM integration for Meteor</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/load-balancing-your-meteor-app'>Load Balancing Your Meteor App</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/extending-meteor-accounts'>Extending Meteor Accounts (login system)</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/travis-ci-support-for-meteor-packages'>Travis CI support for Meteor Packages</a>
                  
                </li>
              
            
              
                <li class='post'>
                  
                    <a href='/meteor-cluster-introduction-and-how-it-works'>Meteor Cluster - Introduction & how it works</a>
                  
                </li>
              
            
          </ul>
        </div>
      </div>
    </div>
    <div class='row blog-xs'>
      <div class='col-xs-12 visible-xs' id='blog-page'>
        <h1>Introduction to Latency Compensation</h1>
        <div id='blog-content'>
          <p>If you’ve browsed <a href="http://www.meteor.com">meteor.com</a> carefully or watched some Meteor videos, you will definitely have heard the term “latency compensation”. Some people think this is just a buzzword and frankly I have not heard this term used anywhere else. But actually, it is very useful and adds a pleasant user experience to your app. Let me help you to understand it and show you how to use it correctly.</p>

<h2 id="latency-compensation-101">Latency compensation 101</h2>

<p>In a traditional application, when a user does some action on an app, they have to wait until the request is processed on the server before the changes are reflected by the UI. But with latency compensation, users no longer need to wait. The result of an action is reflected by the browser immediately. This is a built-in feature of Meteor and you can use it very easily. Let me explain more about it with an example.</p>

<p>We’ll be using a simple blog app as an example. Here’s the JavaScript code for our app:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// File: /lib/collections.js</span>

<span class="nx">Posts</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Meteor</span><span class="p">.</span><span class="nx">Collection</span><span class="p">(</span><span class="s1">'posts'</span><span class="p">);</span>

<span class="nx">Meteor</span><span class="p">.</span><span class="nx">methods</span><span class="p">({</span>
  <span class="na">addPost</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">post</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// add a delay to mimic the network time</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">Meteor</span><span class="p">.</span><span class="nx">isServer</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Meteor</span><span class="p">.</span><span class="nx">_sleepForMs</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">postId</span> <span class="o">=</span> <span class="nx">Posts</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">post</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">postId</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// File: /client/app.js</span>

<span class="nx">Template</span><span class="p">.</span><span class="nx">addPost</span><span class="p">.</span><span class="nx">events</span><span class="p">({</span>
  <span class="s2">"click button"</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#title'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#content'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">post</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">title</span><span class="p">:</span> <span class="nx">title</span><span class="p">,</span>
      <span class="na">content</span><span class="p">:</span> <span class="nx">content</span>
    <span class="p">};</span>

    <span class="nx">Meteor</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">'addPost'</span><span class="p">,</span> <span class="nx">post</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">postId</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">reason</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Router</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'/post/'</span> <span class="o">+</span> <span class="nx">postId</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

</code></pre></div></div>

<p>You can read the full source code from <a href="https://github.com/meteorhacks-samples/simple-blog">here</a>.</p>

<h3 id="without-latency-compensation">Without latency compensation</h3>

<p><img src="https://i.cloudup.com/cGFO63m3qk.png" alt="Without latency compensation" /></p>

<p>When a user adds a new post, a request will be initiated to the server. The server will process the request and send back the document changes. After that it will send the method response and it will fire the callback. Only then will the user be redirected to the actual post added.</p>

<p>There is a wait time between the request initiation and delivery of the result. The user has no clue whether the action has been successfully initiated or not. We can add a loading indicator to get rid of this uncertainty, but there is a better way.</p>

<h3 id="with-latency-compensation">With latency compensation</h3>

<p><img src="https://i.cloudup.com/LgntBPnyDI.png" alt="With latency compensation" /></p>

<p>When the user adds a new post, a request will be sent immediately to the server as usual. But now, the result of the request will be instantly reflected on the client. Meteor detects the document changes on the client side and reflects the changes on the UI.</p>

<p>The server will process the request and send back the changes as usual. But this time, Meteor will diff and merge the server changes with the changes it has detected from the client. Most of the time, both of these are the same unless the server adds some additional fields to the post before inserting it.</p>

<p>So, now all the user actions are reflected immediately and there is no need to wait for the server result. Isn’t that nice?</p>

<blockquote>
  <p>Latency compensation is not supported in our example app yet!</p>
</blockquote>

<h3 id="wait-what-if-the-server-rejects-the-request">Wait, what if the server rejects the request?</h3>

<p>It is possible for the server to reject the request or throw some error. In this scenario, the Meteor client will detect it and revert the changes. This might surprise the user, but there are ways to deal with situations like this. I will explain these later.</p>

<h2 id="implementing-latency-compensation">Implementing latency compensation</h2>

<p>Implementing latency compensation in your app is pretty easy. Meteor has done most of the hard work for you. Let’s begin.</p>

<ul>
  <li>Latency compensation works only if you are doing write operations to a data store supported by Meteor (currently only MongoDB and Redis).</li>
  <li>If you are relying on content from a third-party service like Twitter, there is no way to implement latency compensation directly.</li>
  <li>There are only two places where you can do a write operation to a data store: inside a method call or directly via a local collection.</li>
</ul>

<p>If you are using a local collection, you don’t have to do anything. But if you are using a method, you need to implement your method on both the server and the client.</p>

<p>On the client side, Meteor will evaluate your method and pick out only the data store changes. It will reject the method result or any errors that have occurred. Your method on the client is known as the method stub and the evaluation of it is known as the method simulation.</p>

<p>You might have noticed that our example app has defined its <code class="highlighter-rouge">addPost</code> method inside the <code class="highlighter-rouge">lib</code> directory. In this way, it should be available on both the server and the client. So, our example has latency compensation support.</p>

<p>But wait… I mentioned earlier that our app doesn’t have latency compensation support. Why?</p>

<p>That’s because, we are explicitly waiting for the server result and only then do we route the user to the post. Even though latency compensation works, we simply ignored it by waiting for the server response.</p>

<p>Let’s try to fix our app and add latency compensation support.</p>

<h3 id="the-fix">The fix</h3>

<p>We can simply fix our app by adding <code class="highlighter-rouge">_id</code> to the post inside the client. By doing this, we no longer rely on the server result to get the postId. Now we can route the user to the newly added post just after the method call has been invoked.</p>

<p>Still, it’s possible for the server to reject the request or throw an error. So, we need to add a callback and watch for an error. If there is an error, Meteor will revert the changes made in the client. You will also get notified about the error via the callback. Then, you can simply display an error message to the user.</p>

<p>This is the code, after I made the fix:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// File: /client/app.js
Template.addPost.events({
  "click button": function() {
    var title = $('#title').val();
    var content = $('#content').val();

    var post = {
      title: title,
      content: content,
      _id: Random.id()
    };

    Meteor.call('addPost', post, function(err) {
      if(err) {
        alert(err.reason);
      }
    });

    Router.go('/post/' + post._id);
  }
});
</code></pre></div></div>

<p>This is the diff view of the fix:</p>

<p><img src="https://i.cloudup.com/iRnmkAJJqP.png" alt="Fix for the latency compensation" /></p>

<p>You can have a look at the complete fixed app from <a href="https://github.com/meteorhacks-samples/simple-blog/tree/latency-compensation">here</a>.</p>

<h2 id="when-to-use-latency-compensation">When to use latency compensation</h2>

<p>This completely depends on your app and what you need to achieve. If there is a mission critical task, you may need the users to wait for the server response.</p>

<p>In Kadira, when a user adds an <a href="https://kadira.io/blog/stay-alert-with-your-meteor-app/">alert</a>, they need to wait until it gets processed on the server. So there is no latency compensation. That’s a design decision we’ve chosen for Kadira alerts since we think it’s important for the user to know the result before continuing.</p>

<p>But for an app like Telescope, latency compensation is a must and it will increase user engagement.</p>

<p>So, this is a subjective question and it’s up to you to decide whether to support latency compensation or not.</p>

<h2 id="common-issues">Common Issues</h2>

<h3 id="i-forgot-to-add-the-client-side-method-stub">I forgot to add the client-side method stub</h3>

<p>Check your code and implement the method on both the client and the server. You can easily do this by implementing your method somewhere where it is accessible from both the client and the server. You can use the <code class="highlighter-rouge">Meteor.isSimulation</code> flag to determine whether your code runs inside a simulation or not. That may help you to tweak your method to behave differently on different environments.</p>

<h3 id="i-have-some-secret-logic-in-my-method-and-i-dont-want-the-client-to-see-it">I have some secret logic in my method and I don’t want the client to see it</h3>

<p>Yes, that’s a valid question. But we only need to implement data store changes. So, you can create a method on the server with all the secret logic. Just implement data store changes in a separate method with the same name inside your client code.</p>

<h3 id="i-need-to-rely-on-the-server-response">I need to rely on the server response</h3>

<p>If you wait for the server result (using callback), you won’t get the benefit of the latency compensation. So, design your application to not rely on the server response. Actually, this is always possible, and I don’t believe it’s impossible.</p>

<h3 id="im-using-a-third-party-service">I’m using a third-party service</h3>

<p>Let’s say you are building a Twitter client and the user just created a new tweet. Now, you may invoke an API call to Twitter. But still, it’s a good idea to store all the tweets that have been created from your app in a collection. Then you can implement latency compensation.</p>

<hr />

<p>I think you now have a better understanding of latency compensation and know how to use it correctly. Try it out with your application and share your experience.</p>

<blockquote>
  <p>Thanks <a href="https://twitter.com/imslavko">Slava Kim</a> for reviewing the article</p>
</blockquote>

<hr />

<p>If you’d like to learn exactly how <strong>latency compensation</strong> works inside Meteor, buy my book <a href="https://gumroad.com/l/meteor-explained">Meteor Explained</a>. I discuss latency compensation in <strong>Chapter 4</strong>, where I talk about Methods.</p>

<p><a href="https://gum.co/meteor-explained"><img src="https://i.cloudup.com/XebhBZYIMN.png" alt="Meteor Explained Book Cover" /></a></p>

<blockquote>
  <p><strong>All main chapters</strong> are available right now.</p>

  <p>This book comes with a <strong>100% money-back guarantee</strong> and I’ll refund without asking any questions.</p>
</blockquote>

<p><a href="https://gum.co/meteor-explained">You can purchase <strong>Meteor Explained</strong> for $29</a>.</p>

<p>###Table of Contents</p>

<h4 id="1-basics-available-now">1. Basics (Available Now)</h4>

<ul>
  <li>1.1 Client–Server Architecture</li>
  <li>1.2 DDP</li>
  <li>1.3 Fibers</li>
  <li>1.4 Introduction to Meteor’s Reactivity</li>
</ul>

<h4 id="2-client-side-reactivity-available-now">2. Client-Side Reactivity (Available Now)</h4>

<ul>
  <li>2.1 Local Collections</li>
  <li>2.2 How Deps works</li>
  <li>2.3 How Blaze Works</li>
  <li>2.4 Blaze and Reactivity</li>
</ul>

<h4 id="3-ddp-implementation-available-now">3. DDP Implementation (Available Now)</h4>

<ul>
  <li>3.1 Default DDP Connection</li>
  <li>3.2 Processing Incoming DDP (Client Side)</li>
  <li>3.3 Processing Incoming DDP (Server Side)</li>
</ul>

<h4 id="4-methods-available-now">4. Methods (Available Now)</h4>

<ul>
  <li>4.1 Introduction to Latency Compensation</li>
  <li>4.2 How Latency Compensation Works</li>
  <li>4.3 WriteFence and It’s Usage</li>
</ul>

<h4 id="5-publishsubscribe-available-now">5. Publish/Subscribe (Available Now)</h4>

<ul>
  <li>5.1 How Publish/Subscribe Works</li>
  <li>5.2 Cursors and Observers</li>
  <li>5.3 Merge Box</li>
  <li>5.4 Deps and Subscriptions</li>
</ul>

<h4 id="6-mongodb-and-meteor-available-now">6. MongoDB and Meteor (Available Now)</h4>

<ul>
  <li>6.1 Intro to the mongo Package</li>
  <li>6.2 Polling Observe Driver</li>
  <li>6.3 Oplog Observe Driver</li>
  <li>6.3 MongoDB Write Operations</li>
</ul>

<p><a href="https://gum.co/meteor-explained" class="gumroad-button">Purchase Now</a></p>


        </div>
          <div class='subscribe-form'>
            <div class='title'>Read MeteorHacks from Your Inbox</div>
            <form action="https://madmimi.com/signups/subscribe/85188" method="post" target="_blank">
              <input type='text' name='signup[email]' class='subscribe-form-email' placeholder='Enter your email' />
              <input type='submit' class='subscribe-form-submit' value='Subscribe Now' />
            </form>
          </div>
      </div>
    </div>
  </div>

  <!-- Footer goes here -->
  <footer role='content-info' class='container'>
  MeteorHacks - 2014 
  
     - by <a href="https://plus.google.com/u/0/+ArunodaSusiripala?rel=author">Arunoda Susiripala</a>
  
  <br>
  <small>
    MeteorHacks is an independent entity and has not been authorized, sponsored, or otherwise approved by Meteor Development Group.
  </small>
</footer>

  <!-- GA goes here -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41396877-1', 'meteorhacks.com');
  ga('send', 'pageview');

</script>
</body>
</html>